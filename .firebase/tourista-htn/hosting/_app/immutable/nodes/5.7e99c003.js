import{s as Dn,v as _n,j as vn,o as Rt,d as A,e as yn,m as Tn,k as wn,n as Nt,r as On,g as An}from"../chunks/scheduler.446313d3.js";import{S as In,i as xn,d as $e,F as St,M as Ct,v as bn,s as J,j as I,C as Rn,g as B,c as Q,k as x,l as ie,A as ae,G as Te,m as S,a as Ze,B as D,H as Lt,z as pe,N as Nn,K as Sn,o as Cn,p as Ln,q as Mn,O as Pn}from"../chunks/index.c6fa1565.js";import{g as Fn}from"../chunks/globals.7f7f1b26.js";import{p as Mt}from"../chunks/places.4a093ab1.js";import{n as Pt}from"../chunks/stores.0e5e551b.js";const kn="finalize",Gn="consider";function Oe(e,t,n){e.dispatchEvent(new CustomEvent(kn,{detail:{items:t,info:n}}))}function fe(e,t,n){e.dispatchEvent(new CustomEvent(Gn,{detail:{items:t,info:n}}))}const Je="draggedEntered",Le="draggedLeft",Qe="draggedOverIndex",Dt="draggedLeftDocument",He={LEFT_FOR_ANOTHER:"leftForAnother",OUTSIDE_OF_ANY:"outsideOfAny"};function Wn(e,t,n){e.dispatchEvent(new CustomEvent(Je,{detail:{indexObj:t,draggedEl:n}}))}function zn(e,t,n){e.dispatchEvent(new CustomEvent(Le,{detail:{draggedEl:t,type:He.LEFT_FOR_ANOTHER,theOtherDz:n}}))}function Bn(e,t){e.dispatchEvent(new CustomEvent(Le,{detail:{draggedEl:t,type:He.OUTSIDE_OF_ANY}}))}function Un(e,t,n){e.dispatchEvent(new CustomEvent(Qe,{detail:{indexObj:t,draggedEl:n}}))}function Zn(e){window.dispatchEvent(new CustomEvent(Dt,{detail:{draggedEl:e}}))}const U={DRAG_STARTED:"dragStarted",DRAGGED_ENTERED:Je,DRAGGED_ENTERED_ANOTHER:"dragEnteredAnother",DRAGGED_OVER_INDEX:Qe,DRAGGED_LEFT:Le,DRAGGED_LEFT_ALL:"draggedLeftAll",DROPPED_INTO_ZONE:"droppedIntoZone",DROPPED_INTO_ANOTHER:"droppedIntoAnother",DROPPED_OUTSIDE_OF_ANY:"droppedOutsideOfAny",DRAG_STOPPED:"dragStopped"},Z={POINTER:"pointer",KEYBOARD:"keyboard"},et="isDndShadowItem",_t="data-is-dnd-shadow-item-internal",Hn="data-is-dnd-shadow-item-hint",Yn="id:dnd-shadow-placeholder-0000",Vn="dnd-action-dragged-el";let W="id",ct=0;function Xt(){ct++}function $t(){if(ct===0)throw new Error("Bug! trying to decrement when there are no dropzones");ct--}const vt=typeof window>"u";function Jt(e){let t;const n=e.getBoundingClientRect(),i=getComputedStyle(e),o=i.transform;if(o){let r,s,c,d;if(o.startsWith("matrix3d("))t=o.slice(9,-1).split(/, /),r=+t[0],s=+t[5],c=+t[12],d=+t[13];else if(o.startsWith("matrix("))t=o.slice(7,-1).split(/, /),r=+t[0],s=+t[3],c=+t[4],d=+t[5];else return n;const h=i.transformOrigin,l=n.x-c-(1-r)*parseFloat(h),m=n.y-d-(1-s)*parseFloat(h.slice(h.indexOf(" ")+1)),a=r?n.width/r:e.offsetWidth,f=s?n.height/s:e.offsetHeight;return{x:l,y:m,width:a,height:f,top:m,right:l+a,bottom:m+f,left:l}}else return n}function Qt(e){const t=Jt(e);return{top:t.top+window.scrollY,bottom:t.bottom+window.scrollY,left:t.left+window.scrollX,right:t.right+window.scrollX}}function yt(e){const t=e.getBoundingClientRect();return{top:t.top+window.scrollY,bottom:t.bottom+window.scrollY,left:t.left+window.scrollX,right:t.right+window.scrollX}}function en(e){return{x:(e.left+e.right)/2,y:(e.top+e.bottom)/2}}function jn(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function Tt(e,t){return e.y<=t.bottom&&e.y>=t.top&&e.x>=t.left&&e.x<=t.right}function Ne(e){return en(yt(e))}function Ft(e,t){const n=Ne(e),i=Qt(t);return Tt(n,i)}function Kn(e,t){const n=Ne(e),i=Ne(t);return jn(n,i)}function qn(e){const t=yt(e);return t.right<0||t.left>document.documentElement.scrollWidth||t.bottom<0||t.top>document.documentElement.scrollHeight}function Xn(e,t){const n=yt(t);return Tt(e,n)?{top:e.y-n.top,bottom:n.bottom-e.y,left:e.x-n.left,right:Math.min(n.right,document.documentElement.clientWidth)-e.x}:null}let _e;function wt(){_e=new Map}wt();function $n(e){_e.delete(e)}function Jn(e){const t=Array.from(e.children).findIndex(n=>n.getAttribute(_t));if(t>=0)return _e.has(e)||_e.set(e,new Map),_e.get(e).set(t,Qt(e.children[t])),t}function Qn(e,t){if(!Ft(e,t))return null;const n=t.children;if(n.length===0)return{index:0,isProximityBased:!0};const i=Jn(t);for(let s=0;s<n.length;s++)if(Ft(e,n[s])){const c=_e.has(t)&&_e.get(t).get(s);return c&&!Tt(Ne(e),c)?{index:i,isProximityBased:!1}:{index:s,isProximityBased:!1}}let o=Number.MAX_VALUE,r;for(let s=0;s<n.length;s++){const c=Kn(e,n[s]);c<o&&(o=c,r=s)}return{index:r,isProximityBased:!0}}const Re=25;function tn(){let e;function t(){e={directionObj:void 0,stepPx:0}}t();function n(r){const{directionObj:s,stepPx:c}=e;s&&(r.scrollBy(s.x*c,s.y*c),window.requestAnimationFrame(()=>n(r)))}function i(r){return Re-r}function o(r,s){if(!s)return!1;const c=Xn(r,s);if(c===null)return t(),!1;const d=!!e.directionObj;let[h,l]=[!1,!1];return s.scrollHeight>s.clientHeight&&(c.bottom<Re?(h=!0,e.directionObj={x:0,y:1},e.stepPx=i(c.bottom)):c.top<Re&&(h=!0,e.directionObj={x:0,y:-1},e.stepPx=i(c.top)),!d&&h)||s.scrollWidth>s.clientWidth&&(c.right<Re?(l=!0,e.directionObj={x:1,y:0},e.stepPx=i(c.right)):c.left<Re&&(l=!0,e.directionObj={x:-1,y:0},e.stepPx=i(c.left)),!d&&l)?(n(s),!0):(t(),!1)}return{scrollIfNeeded:o,resetScrolling:t}}function at(e){return JSON.stringify(e,null,2)}function kt(e){if(!e)throw new Error("cannot get depth of a falsy node");return nn(e,0)}function nn(e,t=0){return e.parentElement?nn(e.parentElement,t+1):t-1}function ei(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!{}.hasOwnProperty.call(t,n)||t[n]!==e[n])return!1;return!0}function ti(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}const ni=200,Gt=10,{scrollIfNeeded:ii,resetScrolling:oi}=tn();let dt;function ri(e,t,n=ni){let i,o,r=!1,s;const c=Array.from(t).sort((h,l)=>kt(l)-kt(h));function d(){const h=Ne(e),l=ii(h,i);if(!l&&s&&Math.abs(s.x-h.x)<Gt&&Math.abs(s.y-h.y)<Gt){dt=window.setTimeout(d,n);return}if(qn(e)){Zn(e);return}s=h;let m=!1;for(const a of c){l&&$n(i);const f=Qn(e,a);if(f===null)continue;const{index:v}=f;m=!0,a!==i?(i&&zn(i,e,a),Wn(a,f,e),i=a):v!==o&&(Un(a,f,e),o=v);break}!m&&r&&i?(Bn(i,e),i=void 0,o=void 0,r=!1):r=!0,dt=window.setTimeout(d,n)}d()}function si(){clearTimeout(dt),oi(),wt()}const ai=300;let Ye;function Ve(e){const t=e.touches?e.touches[0]:e;Ye={x:t.clientX,y:t.clientY}}const{scrollIfNeeded:li,resetScrolling:ci}=tn();let on;function rn(){Ye&&li(Ye,document.documentElement)&&wt(),on=window.setTimeout(rn,ai)}function di(){window.addEventListener("mousemove",Ve),window.addEventListener("touchmove",Ve),rn()}function ui(){window.removeEventListener("mousemove",Ve),window.removeEventListener("touchmove",Ve),Ye=void 0,window.clearTimeout(on),ci()}function fi(e){const t=e.cloneNode(!0),n=[],i=e.tagName==="SELECT",o=i?[e]:[...e.querySelectorAll("select")];for(const s of o)n.push(s.value);if(o.length<=0)return t;const r=i?[t]:[...t.querySelectorAll("select")];for(let s=0;s<r.length;s++){const c=r[s],d=n[s],h=c.querySelector(`option[value="${d}"`);h&&h.setAttribute("selected",!0)}return t}const Se=Object.freeze({USE_COMPUTED_STYLE_INSTEAD_OF_BOUNDING_RECT:"USE_COMPUTED_STYLE_INSTEAD_OF_BOUNDING_RECT"}),gi={[Se.USE_COMPUTED_STYLE_INSTEAD_OF_BOUNDING_RECT]:!1};function sn(e){if(!Se[e])throw new Error(`Can't get non existing feature flag ${e}! Supported flags: ${Object.keys(Se)}`);return gi[e]}const hi=.2;function me(e){return`${e} ${hi}s ease`}function mi(e,t){const n=e.getBoundingClientRect(),i=fi(e);an(e,i),i.id=Vn,i.style.position="fixed";let o=n.top,r=n.left;if(i.style.top=`${o}px`,i.style.left=`${r}px`,t){const s=en(n);o-=s.y-t.y,r-=s.x-t.x,window.setTimeout(()=>{i.style.top=`${o}px`,i.style.left=`${r}px`},0)}return i.style.margin="0",i.style.boxSizing="border-box",i.style.height=`${n.height}px`,i.style.width=`${n.width}px`,i.style.transition=`${me("top")}, ${me("left")}, ${me("background-color")}, ${me("opacity")}, ${me("color")} `,window.setTimeout(()=>i.style.transition+=`, ${me("width")}, ${me("height")}`,0),i.style.zIndex="9999",i.style.cursor="grabbing",i}function pi(e){e.style.cursor="grab"}function Ei(e,t,n,i){an(t,e);const o=t.getBoundingClientRect(),r=e.getBoundingClientRect(),s=o.width-r.width,c=o.height-r.height;if(s||c){const d={left:(n-r.left)/r.width,top:(i-r.top)/r.height};sn(Se.USE_COMPUTED_STYLE_INSTEAD_OF_BOUNDING_RECT)||(e.style.height=`${o.height}px`,e.style.width=`${o.width}px`),e.style.left=`${parseFloat(e.style.left)-d.left*s}px`,e.style.top=`${parseFloat(e.style.top)-d.top*c}px`}}function an(e,t){const n=window.getComputedStyle(e);Array.from(n).filter(i=>i.startsWith("background")||i.startsWith("padding")||i.startsWith("font")||i.startsWith("text")||i.startsWith("align")||i.startsWith("justify")||i.startsWith("display")||i.startsWith("flex")||i.startsWith("border")||i==="opacity"||i==="color"||i==="list-style-type"||sn(Se.USE_COMPUTED_STYLE_INSTEAD_OF_BOUNDING_RECT)&&(i==="width"||i==="height")).forEach(i=>t.style.setProperty(i,n.getPropertyValue(i),n.getPropertyPriority(i)))}function Di(e,t){e.draggable=!1,e.ondragstart=()=>!1,t?(e.style.userSelect="",e.style.WebkitUserSelect="",e.style.cursor=""):(e.style.userSelect="none",e.style.WebkitUserSelect="none",e.style.cursor="grab")}function ln(e){e.style.display="none",e.style.position="fixed",e.style.zIndex="-5"}function _i(e){e.style.visibility="hidden",e.setAttribute(_t,"true")}function vi(e){e.style.visibility="",e.removeAttribute(_t)}function Be(e,t=()=>{},n=()=>[]){e.forEach(i=>{const o=t(i);Object.keys(o).forEach(r=>{i.style[r]=o[r]}),n(i).forEach(r=>i.classList.add(r))})}function je(e,t=()=>{},n=()=>[]){e.forEach(i=>{const o=t(i);Object.keys(o).forEach(r=>{i.style[r]=""}),n(i).forEach(r=>i.classList.contains(r)&&i.classList.remove(r))})}function yi(e){const t=e.style.minHeight;e.style.minHeight=window.getComputedStyle(e).getPropertyValue("height");const n=e.style.minWidth;return e.style.minWidth=window.getComputedStyle(e).getPropertyValue("width"),function(){e.style.minHeight=t,e.style.minWidth=n}}const Ti="--any--",wi=100,Wt=3,zt={outline:"rgba(255, 255, 102, 0.7) solid 2px"},Bt="data-is-dnd-original-dragged-item";let oe,F,V,tt,M,nt,Ae,Y,de,X,De=!1,Ot=!1,At,Me=!1,Ue=[];const te=new Map,L=new Map,lt=new WeakMap;function Oi(e,t){te.has(t)||te.set(t,new Set),te.get(t).has(e)||(te.get(t).add(e),Xt())}function Ut(e,t){te.get(t).delete(e),$t(),te.get(t).size===0&&te.delete(t)}function Ai(){di();const e=te.get(tt);for(const n of e)n.addEventListener(Je,cn),n.addEventListener(Le,dn),n.addEventListener(Qe,un);window.addEventListener(Dt,Ie);const t=Math.max(wi,...Array.from(e.keys()).map(n=>L.get(n).dropAnimationDurationMs));ri(F,e,t*1.07)}function Ii(){ui();const e=te.get(tt);for(const t of e)t.removeEventListener(Je,cn),t.removeEventListener(Le,dn),t.removeEventListener(Qe,un);window.removeEventListener(Dt,Ie),si()}function it(e){return e.findIndex(t=>!!t[et])}function cn(e){let{items:t,dropFromOthersDisabled:n}=L.get(e.currentTarget);if(n&&e.currentTarget!==M)return;if(Me=!1,t=t.filter(s=>s[W]!==Ae[W]),M!==e.currentTarget){const c=L.get(M).items.filter(d=>!d[et]);fe(M,c,{trigger:U.DRAGGED_ENTERED_ANOTHER,id:V[W],source:Z.POINTER})}const{index:i,isProximityBased:o}=e.detail.indexObj,r=o&&i===e.currentTarget.children.length-1?i+1:i;Y=e.currentTarget,t.splice(r,0,Ae),fe(e.currentTarget,t,{trigger:U.DRAGGED_ENTERED,id:V[W],source:Z.POINTER})}function dn(e){if(!De)return;const{items:t,dropFromOthersDisabled:n}=L.get(e.currentTarget);if(n&&e.currentTarget!==M&&e.currentTarget!==Y)return;const i=it(t),o=t.splice(i,1)[0];Y=void 0;const{type:r,theOtherDz:s}=e.detail;if(r===He.OUTSIDE_OF_ANY||r===He.LEFT_FOR_ANOTHER&&s!==M&&L.get(s).dropFromOthersDisabled){Me=!0,Y=M;const c=L.get(M).items;c.splice(nt,0,o),fe(M,c,{trigger:U.DRAGGED_LEFT_ALL,id:V[W],source:Z.POINTER})}fe(e.currentTarget,t,{trigger:U.DRAGGED_LEFT,id:V[W],source:Z.POINTER})}function un(e){const{items:t,dropFromOthersDisabled:n}=L.get(e.currentTarget);if(n&&e.currentTarget!==M)return;Me=!1;const{index:i}=e.detail.indexObj,o=it(t);t.splice(o,1),t.splice(i,0,Ae),fe(e.currentTarget,t,{trigger:U.DRAGGED_OVER_INDEX,id:V[W],source:Z.POINTER})}function Ke(e){e.preventDefault();const t=e.touches?e.touches[0]:e;X={x:t.clientX,y:t.clientY},F.style.transform=`translate3d(${X.x-de.x}px, ${X.y-de.y}px, 0)`}function Ie(){Ot=!0,window.removeEventListener("mousemove",Ke),window.removeEventListener("touchmove",Ke),window.removeEventListener("mouseup",Ie),window.removeEventListener("touchend",Ie),Ii(),pi(F),Y||(Y=M);let{items:e,type:t}=L.get(Y);je(te.get(t),o=>L.get(o).dropTargetStyle,o=>L.get(o).dropTargetClasses);let n=it(e);n===-1&&(n=nt),e=e.map(o=>o[et]?V:o);function i(){At(),Oe(Y,e,{trigger:Me?U.DROPPED_OUTSIDE_OF_ANY:U.DROPPED_INTO_ZONE,id:V[W],source:Z.POINTER}),Y!==M&&Oe(M,L.get(M).items,{trigger:U.DROPPED_INTO_ANOTHER,id:V[W],source:Z.POINTER}),vi(Y.children[n]),Ri()}xi(n,i)}function xi(e,t){const n=Jt(Y.children[e]),i={x:n.left-parseFloat(F.style.left),y:n.top-parseFloat(F.style.top)},{dropAnimationDurationMs:o}=L.get(Y),r=`transform ${o}ms ease`;F.style.transition=F.style.transition?F.style.transition+","+r:r,F.style.transform=`translate3d(${i.x}px, ${i.y}px, 0)`,window.setTimeout(t,o)}function bi(e,t){Ue.push({dz:e,destroy:t}),window.requestAnimationFrame(()=>{ln(e),document.body.appendChild(e)})}function Ri(){F.remove(),oe.remove(),Ue.length&&(Ue.forEach(({dz:e,destroy:t})=>{t(),e.remove()}),Ue=[]),F=void 0,oe=void 0,V=void 0,tt=void 0,M=void 0,nt=void 0,Ae=void 0,Y=void 0,de=void 0,X=void 0,De=!1,Ot=!1,At=void 0,Me=!1}function Ni(e,t){let n=!1;const i={items:void 0,type:void 0,flipDurationMs:0,dragDisabled:!1,morphDisabled:!1,dropFromOthersDisabled:!1,dropTargetStyle:zt,dropTargetClasses:[],transformDraggedElement:()=>{},centreDraggedOnCursor:!1};let o=new Map;function r(){window.addEventListener("mousemove",d,{passive:!1}),window.addEventListener("touchmove",d,{passive:!1,capture:!1}),window.addEventListener("mouseup",c,{passive:!1}),window.addEventListener("touchend",c,{passive:!1})}function s(){window.removeEventListener("mousemove",d),window.removeEventListener("touchmove",d),window.removeEventListener("mouseup",c),window.removeEventListener("touchend",c)}function c(){s(),oe=void 0,de=void 0,X=void 0}function d(a){a.preventDefault();const f=a.touches?a.touches[0]:a;X={x:f.clientX,y:f.clientY},(Math.abs(X.x-de.x)>=Wt||Math.abs(X.y-de.y)>=Wt)&&(s(),l())}function h(a){if(a.target!==a.currentTarget&&(a.target.value!==void 0||a.target.isContentEditable)||a.button||De)return;a.stopPropagation();const f=a.touches?a.touches[0]:a;de={x:f.clientX,y:f.clientY},X={...de},oe=a.currentTarget,r()}function l(){De=!0;const a=o.get(oe);nt=a,M=oe.parentElement;const f=M.getRootNode(),v=f.body||f,{items:p,type:R,centreDraggedOnCursor:O}=i;V={...p[a]},tt=R,Ae={...V,[et]:!0,[W]:Yn},F=mi(oe,O&&X),oe.setAttribute(Bt,!0);function _(){F.parentElement?window.requestAnimationFrame(_):(v.appendChild(F),F.focus(),Ai(),ln(oe),v.appendChild(oe))}window.requestAnimationFrame(_),Be(Array.from(te.get(i.type)).filter(g=>g===M||!L.get(g).dropFromOthersDisabled),g=>L.get(g).dropTargetStyle,g=>L.get(g).dropTargetClasses),p.splice(a,1,Ae),At=yi(M),fe(M,p,{trigger:U.DRAG_STARTED,id:V[W],source:Z.POINTER}),window.addEventListener("mousemove",Ke,{passive:!1}),window.addEventListener("touchmove",Ke,{passive:!1,capture:!1}),window.addEventListener("mouseup",Ie,{passive:!1}),window.addEventListener("touchend",Ie,{passive:!1})}function m({items:a=void 0,flipDurationMs:f=0,type:v=Ti,dragDisabled:p=!1,morphDisabled:R=!1,dropFromOthersDisabled:O=!1,dropTargetStyle:_=zt,dropTargetClasses:g=[],transformDraggedElement:w=()=>{},centreDraggedOnCursor:ge=!1}){i.dropAnimationDurationMs=f,i.type&&v!==i.type&&Ut(e,i.type),i.type=v,i.items=[...a],i.dragDisabled=p,i.morphDisabled=R,i.transformDraggedElement=w,i.centreDraggedOnCursor=ge,n&&De&&!Ot&&(!ei(_,i.dropTargetStyle)||!ti(g,i.dropTargetClasses))&&(je([e],()=>i.dropTargetStyle,()=>g),Be([e],()=>_,()=>g)),i.dropTargetStyle=_,i.dropTargetClasses=[...g];function j(E,y){return L.get(E)?L.get(E)[y]:i[y]}n&&De&&i.dropFromOthersDisabled!==O&&(O?je([e],E=>j(E,"dropTargetStyle"),E=>j(E,"dropTargetClasses")):Be([e],E=>j(E,"dropTargetStyle"),E=>j(E,"dropTargetClasses"))),i.dropFromOthersDisabled=O,L.set(e,i),Oi(e,v);const le=it(i.items);for(let E=0;E<e.children.length;E++){const y=e.children[E];if(Di(y,p),E===le){i.transformDraggedElement(F,V,E),R||Ei(F,y,X.x,X.y),_i(y);continue}y.removeEventListener("mousedown",lt.get(y)),y.removeEventListener("touchstart",lt.get(y)),p||(y.addEventListener("mousedown",h),y.addEventListener("touchstart",h),lt.set(y,h)),o.set(y,E),n||(n=!0)}}return m(t),{update:a=>{m(a)},destroy:()=>{function a(){Ut(e,L.get(e).type),L.delete(e)}De&&!e.closest(`[${Bt}]`)?bi(e,a):a()}}}const ut={DND_ZONE_ACTIVE:"dnd-zone-active",DND_ZONE_DRAG_DISABLED:"dnd-zone-drag-disabled"},fn={[ut.DND_ZONE_ACTIVE]:"Tab to one the items and press space-bar or enter to start dragging it",[ut.DND_ZONE_DRAG_DISABLED]:"This is a disabled drag and drop list"},Si="dnd-action-aria-alert";let C;function ft(){C||(C=document.createElement("div"),function(){C.id=Si,C.style.position="fixed",C.style.bottom="0",C.style.left="0",C.style.zIndex="-5",C.style.opacity="0",C.style.height="0",C.style.width="0",C.setAttribute("role","alert")}(),document.body.prepend(C),Object.entries(fn).forEach(([e,t])=>document.body.prepend(Mi(e,t))))}function Ci(){return vt?null:(document.readyState==="complete"?ft():window.addEventListener("DOMContentLoaded",ft),{...ut})}function Li(){vt||!C||(Object.keys(fn).forEach(e=>{var t;return(t=document.getElementById(e))==null?void 0:t.remove()}),C.remove(),C=void 0)}function Mi(e,t){const n=document.createElement("div");return n.id=e,n.innerHTML=`<p>${t}</p>`,n.style.display="none",n.style.position="fixed",n.style.zIndex="-5",n}function we(e){if(vt)return;C||ft(),C.innerHTML="";const t=document.createTextNode(e);C.appendChild(t),C.style.display="none",C.style.display="inline"}const Pi="--any--",Zt={outline:"rgba(255, 255, 102, 0.7) solid 2px"};let $=!1,gt,G,ve="",Ee,re,ue="";const qe=new WeakSet,Ht=new WeakMap,Yt=new WeakMap,ht=new Map,P=new Map,ee=new Map;let Xe;function Fi(e,t){ee.size===0&&(Xe=Ci(),window.addEventListener("keydown",gn),window.addEventListener("click",hn)),ee.has(t)||ee.set(t,new Set),ee.get(t).has(e)||(ee.get(t).add(e),Xt())}function Vt(e,t){G===e&&Ce(),ee.get(t).delete(e),$t(),ee.get(t).size===0&&ee.delete(t),ee.size===0&&(window.removeEventListener("keydown",gn),window.removeEventListener("click",hn),Xe=void 0,Li())}function gn(e){if($)switch(e.key){case"Escape":{Ce();break}}}function hn(){$&&(qe.has(document.activeElement)||Ce())}function ki(e){if(!$)return;const t=e.currentTarget;if(t===G)return;ve=t.getAttribute("aria-label")||"";const{items:n}=P.get(G),i=n.find(h=>h[W]===re),o=n.indexOf(i),r=n.splice(o,1)[0],{items:s,autoAriaDisabled:c}=P.get(t);t.getBoundingClientRect().top<G.getBoundingClientRect().top||t.getBoundingClientRect().left<G.getBoundingClientRect().left?(s.push(r),c||we(`Moved item ${ue} to the end of the list ${ve}`)):(s.unshift(r),c||we(`Moved item ${ue} to the beginning of the list ${ve}`)),Oe(G,n,{trigger:U.DROPPED_INTO_ANOTHER,id:re,source:Z.KEYBOARD}),Oe(t,s,{trigger:U.DROPPED_INTO_ZONE,id:re,source:Z.KEYBOARD}),G=t}function mn(){ht.forEach(({update:e},t)=>e(P.get(t)))}function Ce(e=!0){P.get(G).autoAriaDisabled||we(`Stopped dragging item ${ue}`),qe.has(document.activeElement)&&document.activeElement.blur(),e&&fe(G,P.get(G).items,{trigger:U.DRAG_STOPPED,id:re,source:Z.KEYBOARD}),je(ee.get(gt),t=>P.get(t).dropTargetStyle,t=>P.get(t).dropTargetClasses),Ee=null,re=null,ue="",gt=null,G=null,ve="",$=!1,mn()}function Gi(e,t){const n={items:void 0,type:void 0,dragDisabled:!1,zoneTabIndex:0,dropFromOthersDisabled:!1,dropTargetStyle:Zt,dropTargetClasses:[],autoAriaDisabled:!1};function i(l,m,a){l.length<=1||l.splice(a,1,l.splice(m,1,l[a])[0])}function o(l){switch(l.key){case"Enter":case" ":{if((l.target.disabled!==void 0||l.target.href||l.target.isContentEditable)&&!qe.has(l.target))return;l.preventDefault(),l.stopPropagation(),$?Ce():r(l);break}case"ArrowDown":case"ArrowRight":{if(!$)return;l.preventDefault(),l.stopPropagation();const{items:m}=P.get(e),a=Array.from(e.children),f=a.indexOf(l.currentTarget);f<a.length-1&&(n.autoAriaDisabled||we(`Moved item ${ue} to position ${f+2} in the list ${ve}`),i(m,f,f+1),Oe(e,m,{trigger:U.DROPPED_INTO_ZONE,id:re,source:Z.KEYBOARD}));break}case"ArrowUp":case"ArrowLeft":{if(!$)return;l.preventDefault(),l.stopPropagation();const{items:m}=P.get(e),f=Array.from(e.children).indexOf(l.currentTarget);f>0&&(n.autoAriaDisabled||we(`Moved item ${ue} to position ${f} in the list ${ve}`),i(m,f,f-1),Oe(e,m,{trigger:U.DROPPED_INTO_ZONE,id:re,source:Z.KEYBOARD}));break}}}function r(l){c(l.currentTarget),G=e,gt=n.type,$=!0;const m=Array.from(ee.get(n.type)).filter(a=>a===G||!P.get(a).dropFromOthersDisabled);if(Be(m,a=>P.get(a).dropTargetStyle,a=>P.get(a).dropTargetClasses),!n.autoAriaDisabled){let a=`Started dragging item ${ue}. Use the arrow keys to move it within its list ${ve}`;m.length>1&&(a+=", or tab to another list in order to move the item into it"),we(a)}fe(e,P.get(e).items,{trigger:U.DRAG_STARTED,id:re,source:Z.KEYBOARD}),mn()}function s(l){$&&l.currentTarget!==Ee&&(l.stopPropagation(),Ce(!1),r(l))}function c(l){const{items:m}=P.get(e),a=Array.from(e.children),f=a.indexOf(l);Ee=l,Ee.tabIndex=0,re=m[f][W],ue=a[f].getAttribute("aria-label")||""}function d({items:l=[],type:m=Pi,dragDisabled:a=!1,zoneTabIndex:f=0,dropFromOthersDisabled:v=!1,dropTargetStyle:p=Zt,dropTargetClasses:R=[],autoAriaDisabled:O=!1}){n.items=[...l],n.dragDisabled=a,n.dropFromOthersDisabled=v,n.zoneTabIndex=f,n.dropTargetStyle=p,n.dropTargetClasses=R,n.autoAriaDisabled=O,n.type&&m!==n.type&&Vt(e,n.type),n.type=m,Fi(e,m),O||(e.setAttribute("aria-disabled",a),e.setAttribute("role","list"),e.setAttribute("aria-describedby",a?Xe.DND_ZONE_DRAG_DISABLED:Xe.DND_ZONE_ACTIVE)),P.set(e,n),$?e.tabIndex=e===G||Ee.contains(e)||n.dropFromOthersDisabled||G&&n.type!==P.get(G).type?-1:0:e.tabIndex=n.zoneTabIndex,e.addEventListener("focus",ki);for(let _=0;_<e.children.length;_++){const g=e.children[_];qe.add(g),g.tabIndex=$?-1:0,O||g.setAttribute("role","listitem"),g.removeEventListener("keydown",Ht.get(g)),g.removeEventListener("click",Yt.get(g)),a||(g.addEventListener("keydown",o),Ht.set(g,o),g.addEventListener("click",s),Yt.set(g,s)),$&&n.items[_][W]===re&&(Ee=g,Ee.tabIndex=0,g.focus())}}d(t);const h={update:l=>{d(l)},destroy:()=>{Vt(e,n.type),P.delete(e),ht.delete(e)}};return ht.set(e,h),h}function pn(e,t){if(Wi(e))return{update:()=>{},destroy:()=>{}};jt(t);const n=Ni(e,t),i=Gi(e,t);return{update:o=>{jt(o),n.update(o),i.update(o)},destroy:()=>{n.destroy(),i.destroy()}}}function Wi(e){return!!e.closest(`[${Hn}="true"]`)}function jt(e){const{items:t,flipDurationMs:n,type:i,dragDisabled:o,morphDisabled:r,dropFromOthersDisabled:s,zoneTabIndex:c,dropTargetStyle:d,dropTargetClasses:h,transformDraggedElement:l,autoAriaDisabled:m,centreDraggedOnCursor:a,...f}=e;if(Object.keys(f).length>0&&console.warn("dndzone will ignore unknown options",f),!t)throw new Error("no 'items' key provided to dndzone");const v=t.find(p=>!{}.hasOwnProperty.call(p,W));if(v)throw new Error(`missing '${W}' property for item ${at(v)}`);if(h&&!Array.isArray(h))throw new Error(`dropTargetClasses should be an array but instead it is a ${typeof h}, ${at(h)}`);if(c&&!zi(c))throw new Error(`zoneTabIndex should be a number but instead it is a ${typeof c}, ${at(c)}`)}function zi(e){return!isNaN(e)&&function(t){return(t|0)===t}(parseFloat(e))}const En=""+new URL("../assets/drag.0996dc74.svg",import.meta.url).href;const{document:Kt}=Fn,b="C:/Users/darre/Documents/GitHub/HTN2023/src/routes/travel/+page.svelte";function ze(e,t,n){const i=e.slice();return i[22]=t[n],i}function mt(e){let t,n='Add a destination in "Explore" to get started!';const i={c:function(){t=I("h2"),t.textContent=n,this.h()},l:function(r){t=x(r,"H2",{class:!0,"data-svelte-h":!0}),ae(t)!=="svelte-rcinfj"&&(t.textContent=n),this.h()},h:function(){S(t,"class","noLocations s-AWa54G7Oxlzf"),A(t,b,213,12,4233)},m:function(r,s){Ze(r,t,s)},d:function(r){r&&B(t)}};return $e("SvelteRegisterBlock",{block:i,id:mt.name,type:"if",source:"(161:8) {#if $locations.length === 0}",ctx:e}),i}function pt(e,t){let n,i,o,r,s,c=t[22].text+"",d,h,l,m="Remove",a,f,v;function p(){return t[11](t[22])}const R={key:e,first:null,c:function(){n=I("div"),i=I("span"),o=I("img"),s=J(),d=Cn(c),h=J(),l=I("button"),l.textContent=m,a=J(),this.h()},l:function(_){n=x(_,"DIV",{class:!0});var g=ie(n);i=x(g,"SPAN",{class:!0});var w=ie(i);o=x(w,"IMG",{src:!0,alt:!0,class:!0}),s=Q(w),d=Ln(w,c),w.forEach(B),h=Q(g),l=x(g,"BUTTON",{class:!0,"data-svelte-h":!0}),ae(l)!=="svelte-4glfyh"&&(l.textContent=m),a=Q(g),g.forEach(B),this.h()},h:function(){An(o.src,r=En)||S(o,"src",r),S(o,"alt","drag"),S(o,"class","s-AWa54G7Oxlzf"),A(o,b,221,24,4605),S(i,"class","dragContent s-AWa54G7Oxlzf"),A(i,b,220,20,4553),S(l,"class","remove s-AWa54G7Oxlzf"),A(l,b,224,20,4731),S(n,"class","s-AWa54G7Oxlzf"),A(n,b,219,16,4526),this.first=n},m:function(_,g){Ze(_,n,g),D(n,i),D(i,o),D(i,s),D(i,d),D(n,h),D(n,l),D(n,a),f||(v=pe(l,"click",p,!1,!1,!1,!1),f=!0)},p:function(_,g){t=_,g&8&&c!==(c=t[22].text+"")&&Mn(d,c)},d:function(_){_&&B(n),f=!1,v()}};return $e("SvelteRegisterBlock",{block:R,id:pt.name,type:"each",source:"(167:12) {#each items as item (item.id)}",ctx:t}),R}function Et(e){let t,n,i,o,r,s="Your Travel Plan:",c,d,h,l="Driving",m,a="Walking",f,v="Bicycling",p,R="Transit",O,_,g,w=[],ge=new Map,j,le,E,y,Pe="Add a Destination:",xe,u,N,H,K,ne="Add",ot,he,rt,It,z=e[0].length===0&&mt(e),ye=St(e[3]);const Fe=q=>q[22].id;Ct(e,ye,ze,Fe);for(let q=0;q<ye.length;q+=1){let T=ze(e,ye,q),k=Fe(T);ge.set(k,w[q]=pt(k,T))}const xt={c:function(){t=J(),n=I("main"),i=I("div"),o=I("div"),r=I("h1"),r.textContent=s,c=J(),d=I("select"),h=I("option"),h.textContent=l,m=I("option"),m.textContent=a,f=I("option"),f.textContent=v,p=I("option"),p.textContent=R,O=J(),z&&z.c(),_=J(),g=I("section");for(let T=0;T<w.length;T+=1)w[T].c();le=J(),E=I("div"),y=I("h2"),y.textContent=Pe,xe=J(),u=I("form"),N=I("input"),H=J(),K=I("button"),K.textContent=ne,ot=J(),he=I("div"),this.h()},l:function(T){Rn("svelte-10adu1d",Kt.head).forEach(B),t=Q(T),n=x(T,"MAIN",{class:!0});var se=ie(n);i=x(se,"DIV",{class:!0});var ce=ie(i);o=x(ce,"DIV",{class:!0});var ke=ie(o);r=x(ke,"H1",{"data-svelte-h":!0}),ae(r)!=="svelte-2yuyhk"&&(r.textContent=s),c=Q(ke),d=x(ke,"SELECT",{class:!0});var be=ie(d);h=x(be,"OPTION",{"data-svelte-h":!0}),ae(h)!=="svelte-148l894"&&(h.textContent=l),m=x(be,"OPTION",{"data-svelte-h":!0}),ae(m)!=="svelte-1h2dtgs"&&(m.textContent=a),f=x(be,"OPTION",{"data-svelte-h":!0}),ae(f)!=="svelte-zm2wvi"&&(f.textContent=v),p=x(be,"OPTION",{"data-svelte-h":!0}),ae(p)!=="svelte-1wwvumo"&&(p.textContent=R),be.forEach(B),ke.forEach(B),O=Q(ce),z&&z.l(ce),_=Q(ce),g=x(ce,"SECTION",{class:!0});var bt=ie(g);for(let st=0;st<w.length;st+=1)w[st].l(bt);bt.forEach(B),le=Q(ce),E=x(ce,"DIV",{class:!0});var Ge=ie(E);y=x(Ge,"H2",{"data-svelte-h":!0}),ae(y)!=="svelte-1r89qho"&&(y.textContent=Pe),xe=Q(Ge),u=x(Ge,"FORM",{});var We=ie(u);N=x(We,"INPUT",{type:!0,placeholder:!0,class:!0}),H=Q(We),K=x(We,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),ae(K)!=="svelte-j1u4ea"&&(K.textContent=ne),We.forEach(B),Ge.forEach(B),ce.forEach(B),ot=Q(se),he=x(se,"DIV",{id:!0,class:!0}),ie(he).forEach(B),se.forEach(B),this.h()},h:function(){Kt.title="Travel",A(r,b,202,12,3769),h.__value="driving",Te(h,h.__value),A(h,b,206,16,3923),m.__value="walking",Te(m,m.__value),A(m,b,207,16,3981),f.__value="bicycling",Te(f,f.__value),A(f,b,208,16,4039),p.__value="transit",Te(p,p.__value),A(p,b,209,16,4101),S(d,"class","s-AWa54G7Oxlzf"),e[1]===void 0&&yn(()=>e[10].call(d)),A(d,b,205,12,3841),S(o,"class","s-AWa54G7Oxlzf"),A(o,b,201,8,3750),S(g,"class","s-AWa54G7Oxlzf"),A(g,b,217,8,4365),A(y,b,229,12,4918),S(N,"type","text"),S(N,"placeholder","Add a destination here"),S(N,"class","s-AWa54G7Oxlzf"),A(N,b,231,16,5007),S(K,"type","submit"),S(K,"class","s-AWa54G7Oxlzf"),A(K,b,232,16,5107),A(u,b,230,12,4959),S(E,"class","add s-AWa54G7Oxlzf"),A(E,b,228,8,4887),S(i,"class","s-AWa54G7Oxlzf"),A(i,b,200,4,3735),S(he,"id","map"),S(he,"class","s-AWa54G7Oxlzf"),A(he,b,236,4,5196),S(n,"class","s-AWa54G7Oxlzf"),A(n,b,199,0,3723)},m:function(T,k){Ze(T,t,k),Ze(T,n,k),D(n,i),D(i,o),D(o,r),D(o,c),D(o,d),D(d,h),D(d,m),D(d,f),D(d,p),Lt(d,e[1],!0),D(i,O),z&&z.m(i,null),D(i,_),D(i,g);for(let se=0;se<w.length;se+=1)w[se]&&w[se].m(g,null);D(i,le),D(i,E),D(E,y),D(E,xe),D(E,u),D(u,N),Te(N,e[2]),D(u,H),D(u,K),D(n,ot),D(n,he),rt||(It=[pe(d,"change",e[5],!1,!1,!1,!1),pe(d,"change",e[10]),Tn(j=pn.call(null,g,{items:e[3]})),pe(g,"consider",e[8],!1,!1,!1,!1),pe(g,"finalize",e[9],!1,!1,!1,!1),pe(N,"input",e[12]),pe(u,"submit",e[7],!1,!1,!1,!1)],rt=!0)},p:function(T,[k]){k&2&&Lt(d,T[1]),T[0].length===0?z||(z=mt(T),z.c(),z.m(i,_)):z&&(z.d(1),z=null),k&72&&(ye=St(T[3]),Ct(T,ye,ze,Fe),w=Nn(w,k,Fe,1,T,ye,ge,g,Pn,pt,null,ze)),j&&wn(j.update)&&k&8&&j.update.call(null,{items:T[3]}),k&4&&N.value!==T[2]&&Te(N,T[2])},i:Nt,o:Nt,d:function(T){T&&(B(t),B(n)),z&&z.d();for(let k=0;k<w.length;k+=1)w[k].d();rt=!1,On(It)}};return $e("SvelteRegisterBlock",{block:xt,id:Et.name,type:"component",source:"",ctx:e}),xt}function Bi(e){let t=Math.floor(e/86400),n=Math.floor(e%(3600*24)/3600),i=Math.floor(e%3600/60);return t+"d "+n+"h "+i+"m"}function qt(e){let t=0;const n=e.routes[0];if(n){for(let i=0;i<n.legs.length;i++)t+=n.legs[i].distance.value;return t=t/1e3,t}}function Ui(e,t,n){let i,o,{$$slots:r={},$$scope:s}=t;bn("Page",r,[]);const c=Mt();_n(c,"locations"),vn(e,c,u=>n(0,o=u));let d="driving",h=null,l="",m=0,a=0;Rt(()=>{O()});let f=null,v=null,p=null;function R(){setTimeout(()=>{_(f,v,o)}),v.getDirections()}function O(){f=new google.maps.DirectionsService,v=new google.maps.DirectionsRenderer,p=new google.maps.Map(document.getElementById("map"),{zoom:7,center:{lat:0,lng:0}}),v.setMap(p),Pt&&R(),R()}function _(u,N,H=[]){let K=[];for(let ne of H)ne!==H[0]&&ne!==H[H.length-1]&&K.push({location:ne,stopover:!0});H.length>0&&u.route({origin:H[0],destination:H[H.length-1],waypoints:K,travelMode:d==="driving"?google.maps.TravelMode.DRIVING:d==="walking"?google.maps.TravelMode.WALKING:d==="bicycling"?google.maps.TravelMode.BICYCLING:google.maps.TravelMode.TRANSIT}).then(ne=>{N.setDirections(ne),m=qt(ne),a=g()}).catch(ne=>{_(u,N,H)})}function g(){let u=0;switch(d){case"driving":u=80;break;case"walking":u=5;break;case"bicycling":u=20;break;case"transit":u=60;break;default:u=80}return m/u*60*60}function w(u){u&&c.remove(u),R()}function ge(){new google.maps.DirectionsService().route({origin:l,destination:l,waypoints:[],travelMode:google.maps.TravelMode.DRIVING}).then(N=>{c.add(l),R(),n(2,l="")}).catch(N=>{alert("Invalid location")})}const j=u=>{n(3,i=u.detail.items)},le=u=>{n(3,i=u.detail.items),c.set(i.map(N=>N.text)),R()},E=[];Object.keys(t).forEach(u=>{!~E.indexOf(u)&&u.slice(0,2)!=="$$"&&u!=="slot"&&console.warn(`<Page> was created with unknown prop '${u}'`)});function y(){d=Sn(this),n(1,d)}const Pe=u=>w(u.text);function xe(){l=this.value,n(2,l)}return e.$capture_state=()=>({onMount:Rt,places:Mt,navigating:Pt,dndzone:pn,dragIndicator:En,locations:c,transportation:d,travelMode:h,newLocation:l,totalDistance:m,totalTime:a,directionsService:f,directionsRenderer:v,map:p,onChangeHandler:R,initMap:O,calculateAndDisplayRoute:_,sToTime:Bi,computeTotalTime:g,computeTotalDistance:qt,removeLocation:w,addLocation:ge,handleConsider:j,handleFinalize:le,items:i,$locations:o}),e.$inject_state=u=>{"transportation"in u&&n(1,d=u.transportation),"travelMode"in u&&(h=u.travelMode),"newLocation"in u&&n(2,l=u.newLocation),"totalDistance"in u&&(m=u.totalDistance),"totalTime"in u&&(a=u.totalTime),"directionsService"in u&&(f=u.directionsService),"directionsRenderer"in u&&(v=u.directionsRenderer),"map"in u&&(p=u.map),"items"in u&&n(3,i=u.items)},t&&"$$inject"in t&&e.$inject_state(t.$$inject),e.$$.update=()=>{e.$$.dirty&1&&n(3,i=o.map((u,N)=>({id:N,text:u})))},[o,d,l,i,c,R,w,ge,j,le,y,Pe,xe]}class Ki extends In{constructor(t){super(t),xn(this,t,Ui,Et,Dn,{}),$e("SvelteRegisterComponent",{component:this,tagName:"Page",options:t,id:Et.name})}}export{Ki as component};
